<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="user">

	<insert id="join2" parameterType="launch.box.makeit.user.vo.UserVO">
		INSERT INTO user
		(storeSrls,email,emailDomain,password,name,phone,joinDate,oAuthProvider,pushKey)
		VALUES
		(#{storeSrls},#{email},#{emailDomain},#{password},#{name},#{phone},now(),#{oAuthProvider},#{pushKey});
	</insert>

	
  	<update id="alter" parameterType="launch.box.makeit.user.vo.UserVO">
		UPDATE user SET
		password=#{password}, nickname=#{nickname}, phone=#{phone}, address=#{address}
		WHERE email=#{email} and emailDomain=#{emailDomain};
	</update>
 	<delete id="dropout" parameterType="Integer">
		DELETE FROM user 
		WHERE srl=#{value};
	</delete>
 	<select id="login" parameterType="launch.box.makeit.user.vo.UserVO" resultType="launch.box.makeit.user.vo.UserVO">
		SELECT * FROM user 
		WHERE email=#{email} and emailDomain=#{emailDomain} and password=#{password};
	</select>
 	<update id="inputPushKey" parameterType="launch.box.makeit.user.vo.UserVO">
		UPDATE user SET pushKey=#{pushKey} 
		WHERE email=#{email} and emailDomain=#{emailDomain};
	</update>
  	<select id="checkEmail" parameterType="launch.box.makeit.user.vo.UserVO" resultType="launch.box.makeit.user.vo.UserVO">
		SELECT * FROM user
		WHERE email=#{email} and emailDomain=#{emailDomain};
	</select>

	<select id="pullUserInfo" parameterType="Integer" resultType="launch.box.makeit.user.vo.UserVO">
		SELECT * FROM user WHERE srl=#{value};
	</select>
	<select id="pullPushKey" parameterType="Integer" resultType="Integer">
		SELECT pushkey FROM user WHERE srl=#{value};
	</select>
	<update id="createRandom" parameterType="launch.box.makeit.user.vo.UserVO">
		UPDATE user SET
		random=#{random}
		WHERE srl=#{srl};
	</update>
	<select id="pullUserInfoFromRandom" parameterType="Integer" resultType="launch.box.makeit.user.vo.UserVO">
		SELECT * FROM user WHERE random=#{random};
	</select>
</mapper>	